<html>
  <head>
    <title>Android Clean 架构浅析 - haohao</title>
    <link href='/images/ic_small.png' rel='shortcut icon'>
<link href='/atom.xml' rel='alternate' type='application/rss+xml'>
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/highlight.css">
<link rel="stylesheet" href="/css/responsive.css">
<script src="/js/jquery.js"></script>
<script src="/js/basics.js"></script>
<meta content='width=device-width, initial-scale=1.0, user-scalable=no' name='viewport'>
<meta content='text/html; charset=utf-8' http-equiv='content-type'>


	<script src="/prettify/prettify.js" type="text/javascript"></script>
	<link rel="stylesheet" href="/themes/tomorrow-night-eighties.css" type="text/css">
  </head>
  <body>
    <header>
  <a id='go-back-home' href='/'><img src='/images/ic_middle.png' alt='Home' width='96' height='96'></a>
  <p>haohao</p>
  <p>不忘初心，不惧未来</p>
</header>

    <div id='container'>
      <div class='block'>
  
    <a class='main' href='/'>Home</a>
  
    <a class='main' href='/custom'>About</a>
  
    <a class='main' href='mailto:haohaochang86@gmail.com'>Email</a>
  
    <a class='main' href='https://github.com/githubhaohao'>Github</a>
  
</div>

      <section class='paging'>
  
    <div class='left'>
      <a href='/2017/04/22/Android-多线程实现方式/'>
        ‹
      </a>
    </div>
  
  
    <div class='right'>
      <a href='/2017/04/13/RecyclerView-加载与刷新功能实现/'>
        ›
      </a>
    </div>
  
</section>

      <div class='content'>
        <section class='post'>
          <h1>
            <div class='date'>2017-04-15</div>
            Android Clean 架构浅析
          </h1>
          <p align="center"><img src="http://i1.piimg.com/588795/f96da96df4251851.jpg" alt="Cover"></p>

<p align="center">死磕 Android 架构也是一种娱乐</p>

<blockquote><p>Android 常用的架构主要有 MVC，MVP，MVVM 以及 Clean 。以上架构设计模式没有绝对的优劣之分，关键要看具体的应用场景。更多关于 MVC，MVP 以及 MVVM 介绍可以参考<a href="http://haohaochang.cn/2017/02/12/MVVM%EF%BC%8CRxJava%E5%92%8CRetrofit%E7%9A%84%E4%B8%80%E6%AC%A1%E5%AE%9E%E8%B7%B5/" target="_blank" rel="external">MVC,MVP &amp; MVVM</a></p>
</blockquote>
<h2 id="什么是-Clean-架构？"><a href="#什么是-Clean-架构？" class="headerlink" title="什么是 Clean 架构？"></a>什么是 Clean 架构？</h2><p align="center"><img src="http://www.elapsetech.com/media/107552/Close-Up-Robert-C-Martin.jpg" alt="author"></p>

<p align="center">Robert C. Martin (Uncle Bob)</p>

<p>Clean 架构是由 Uncle Bob 在 2012 年发表的, 针对 Web App 的架构设计。 </p>
<p>Bob大叔总结了各种系统架构的共通之处以及最终目标，并提出只需秉持分层与依赖规则的原则, 提出了 Clean 架构思想。</p>
<h2 id="Clean-架构浅析"><a href="#Clean-架构浅析" class="headerlink" title="Clean 架构浅析"></a>Clean 架构浅析</h2><h3 id="单向依赖"><a href="#单向依赖" class="headerlink" title="单向依赖"></a>单向依赖</h3><p><img src="https://fernandocejas.com/assets/migrated/clean_architecture1.png" alt="Cover"></p>
<p align="center">图片来自 Robert C. Martin (Uncle Bob)</p>

<p>Clean 架构各层之间的依赖是单向的，只能是外层依赖内层。</p>
<h3 id="MVP-VS-Clean"><a href="#MVP-VS-Clean" class="headerlink" title="MVP VS Clean"></a>MVP VS Clean</h3><p><img src="https://github.com/googlesamples/android-architecture/wiki/images/mvp-clean.png" alt="Cover"></p>
<p align="center">图片来自 Google</p>

<p>从上图可以看到 Clean 架构的 Android 实现，实际上是对目前比较流行的 MVP 架构进行改造。</p>
<p>MVP 之 View 和 Presenter 层作为 Clean 架构的 Presentations Layer, 新增 Domain Layer    处理所有的业务逻辑。MVP 中的 Model 层功能被弱化，作为 Data Layer 对外只提供接口，不再有业务逻辑。 一般来说每一层都有独立的数据模型。</p>
<h3 id="Clean-之-Presentation-层"><a href="#Clean-之-Presentation-层" class="headerlink" title="Clean 之 Presentation 层"></a>Clean 之 Presentation 层</h3><p>包含如下类： </p>
<ul>
<li>Presenter 和 View 层相关类，当然你也可以在 MVVP 架构基础之上进行改造。 </li>
<li>Mapper 类，负责将 Domain 层的数据模型转换为 Presentation 的数据模型。</li>
<li>本层的异常封装类。</li>
</ul>
<h3 id="Clean-之-Domain-层"><a href="#Clean-之-Domain-层" class="headerlink" title="Clean 之 Domain 层"></a>Clean 之 Domain 层</h3><p>Domain 层不依赖于 Android 类库和第三方库，可以独立做单元测试。</p>
<p>包含如下类：</p>
<ul>
<li>Use Cases (Interactor）类，负责完成对 Data 层的某一操作行为。（如获取 movie list ,获取某一 movie 的 detail info 可视为 2 个 Use Case 或 Interactor）。</li>
<li>Mapper 类，负责将 Data 层的数据模型转换为 Domain 层的数据模型。</li>
<li>本层的异常封装类。</li>
</ul>
<h3 id="Clean-之-Data-层"><a href="#Clean-之-Data-层" class="headerlink" title="Clean 之 Data 层"></a>Clean 之 Data 层</h3><p><img src="https://fernandocejas.com/assets/migrated/clean_architecture_data.png" alt="data"></p>
<p align="center">图片来自 Robert C. Martin (Uncle Bob)</p>

<p>这张图就足够说明一切了。</p>
<p>包含各种 API 接口，主要对应数据库操作，文件操作以及网络数据操作，一些异常封装类。<br>Mapper 类，负责将网络数据模型转换为 Data 层的数据模型。</p>
<p><strong>注意 Data 层只提供接口，没有业务逻辑。</strong></p>
<h3 id="更多"><a href="#更多" class="headerlink" title="更多"></a>更多</h3><ul>
<li><a href="https://github.com/googlesamples/android-architecture/tree/todo-mvp-clean/" target="_blank" rel="external">https://github.com/googlesamples/android-architecture/tree/todo-mvp-clean/</a></li>
<li><a href="https://fernandocejas.com/2014/09/03/architecting-android-the-clean-way/" target="_blank" rel="external">https://fernandocejas.com/2014/09/03/architecting-android-the-clean-way/</a></li>
</ul>

          <br>
<p align="center">haohao</p>
<div class='date' align="center">2017-04-15</div>

        </section>
      </div>
      <div class='block'>
  
    <a class='main' href='/'>Home</a>
  
    <a class='main' href='/custom'>About</a>
  
    <a class='main' href='mailto:haohaochang86@gmail.com'>Email</a>
  
    <a class='main' href='https://github.com/githubhaohao'>Github</a>
  
</div>

    </div>
    <footer>
  <span class='muted'>&copy; 2017 Powered by haohao</span><br>
  <br>

</footer>

	<script type="text/javascript">
	  $(window).load(function(){
         $('pre').addClass('prettyprint').attr('style', 'overflow:auto;');
         prettyPrint();
      })
	  
	  $(".block .main").hover(function() {
          $(this).css({"background-color" : "#ddd"});
        },function() {
          $(this).css({"background-color" : "white"});
		});	
	</script>
  </body>
</html>
